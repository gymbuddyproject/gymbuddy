{% extends 'gymbuddy/base.html' %}
{% block body_block %}
<div class="boxed">
    <p>some info here</p>
</div>

<div id="map"></div>
    <script>
      var map;
      var marker;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 55.871729, lng: -4.288315},
          zoom: 15
        });

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function (position) {
            initialLocation = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
            map.setCenter(initialLocation);
        });

        var contentString = 'Put gym info here'

        var infowindow = new google.maps.InfoWindow({
          content: contentString
        });
 }
         marker = new google.maps.Marker({
            position: {lat: 55.868626, lng: -4.270873},
            animation: google.maps.Animation.DROP,
            map: map,
            title: 'Pure Gym: Charing Cross'
        });

        marker.addListener('click', function() {
          infowindow.open(map, marker);
        });

        {% if Gyms %}
            {% for Gym in Gyms %}
                var contentString = Gym.GymName

                var infowindow = new google.maps.InfoWindow({
                    content: contentString
                });

                marker = new google.maps.Marker({
                    position: {lat: Gym.X_Coord, lng: Gym.Y_Coord},
                    animation: google.maps.Animation.DROP,
                    map: map,
                    title: Gym.GymName
                 });

                 marker.addListener('click', function() {
                    infowindow.open(map, marker);
                 });
            {% endfor %}
        {% endif%}
      }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA_XqtZXs7QjWLeSBO3urXsUAgRg8Ge8Z4&callback=initMap"
    async defer></script>
{% endblock %}
